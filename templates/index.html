<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>SwarmHub - –†–æ–µ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã</title>
  <link rel="icon" href="../static/favicon.svg" type="image/x-icon">
  <link rel="shortcut icon" href="../static/favicon.svg" type="image/x-icon">
  <link rel="stylesheet" href="../static/css/styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <div class="container">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ–µ–∫—Ç–∞ -->
    <div class="project-header">
      <h1 class="project-title">SwarmHub</h1>
      <p class="project-subtitle">
        –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–æ–µ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤. 
        –ò—Å—Å–ª–µ–¥—É–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ —Å–∞–º–æ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ 
        –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∏–º—É–ª—è—Ü–∏–∏ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
      </p>
      
      <div class="project-info">
        <div class="project-links">
          <a href="https://github.com/RiddlerXenon/SwarmHub" class="github-link" target="_blank">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            @RiddlerXenon/SwarmHub
          </a>
        </div>
        
        <div class="divider"></div>
        
        <div class="university-info">
          <img src="https://kursksu.ru/images/logoH.png" alt="–ö–ì–£" class="university-logo">
          <span>–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ –ö—É—Ä—Å–∫–æ–º –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–º —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ</span>
        </div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ -->
    
    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ 1 - Boids -->
    <div class="card">
      <canvas id="previewBoids" onclick="openModal('./boids.html')"></canvas>
      <div class="desc" onclick="openModal('./descriptions/boids.html')">
        <div class="title">Boids Simulation</div>
        <div class="description">–°–∏–º—É–ª—è—Ü–∏—è —Å—Ç–∞–∏ –ø—Ç–∏—Ü. –ö–∞–∂–¥–∞—è —á–∞—Å—Ç–∏—Ü–∞ —Å–ª–µ–¥—É–µ—Ç —Ç—Ä–µ–º –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–∞–≤–∏–ª–∞–º: –¥–µ—Ä–∂–∏—Å—å –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç–∞–µ–π, –∏–∑–±–µ–≥–∞–π —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –∏ –¥–≤–∏–≥–∞–π—Å—è –≤ —Ç–æ–º –∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, —á—Ç–æ –∏ —Å–æ—Å–µ–¥–∏.</div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ 2 - ACO -->
    <div class="card">
      <canvas id="previewAnts" onclick="openModal('./aco.html')"></canvas>
      <div class="desc" onclick="openModal('./descriptions/aco.html')">
        <div class="title">Ant Colony Optimization</div>
        <div class="description">–ú—É—Ä–∞–≤—å–∏ –∏—â—É—Ç –∫—Ä–∞—Ç—á–∞–π—à–∏–π –ø—É—Ç—å –º–µ–∂–¥—É —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –∏ –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∞–º–∏. –ö–∞–∂–¥—ã–π –º—É—Ä–∞–≤–µ–π –æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ–µ—Ä–æ–º–æ–Ω–æ–≤—ã–π —Å–ª–µ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –¥—Ä—É–≥–∏—Ö –º—É—Ä–∞–≤—å–µ–≤ –∫ –ª—É—á—à–∏–º —Ä–µ—à–µ–Ω–∏—è–º.</div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ 3 - SDS -->
    <div class="card">
      <canvas id="previewSDS" onclick="openModal('./sds.html')"></canvas>
      <div class="desc" onclick="openModal('./descriptions/sds.html')">
        <div class="title">Stochastic Diffusion Search</div>
        <div class="description">–ê–≥–µ–Ω—Ç—ã —Å–ª—É—á–∞–π–Ω–æ –±–ª—É–∂–¥–∞—é—Ç –ø–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤—É –ø–æ–∏—Å–∫–∞ –≤ –ø–æ–ø—ã—Ç–∫–µ –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º—É–º —Ü–µ–ª–µ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –õ—É—á—à–∏–µ –∞–≥–µ–Ω—Ç—ã –¥–µ–ª—è—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö.</div>
      </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ 4 - Vicsek -->
    <div class="card">
      <canvas id="previewVicsek" onclick="openModal('./vicsek.html')"></canvas>
      <div class="desc" onclick="openModal('./descriptions/vicsek.html')">
        <div class="title">Vicsek Model</div>
        <div class="description">–ß–∞—Å—Ç–∏—Ü—ã –¥–≤–∏–∂—É—Ç—Å—è —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç –≤ —Å—Ä–µ–¥–Ω–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Å–≤–æ–∏—Ö —Å–æ—Å–µ–¥–µ–π –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ä–∞–¥–∏—É—Å–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.</div>
      </div>
    </div>

    <!-- Footer -->
    <div class="project-footer">
      <p>SwarmHub ¬© 2025 | –ö—É—Ä—Å–∫–∏–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç | –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ä–æ–µ–≤–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞</p>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="modal">
      <!-- –û–±—ã—á–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ -->
      <button class="close-btn" onclick="closeModal()">‚úï</button>
      <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
      <button class="mobile-close-btn" onclick="closeModal()">‚úï</button>
      <iframe id="modalFrame" src=""></iframe>
    </div>
  </div>

  <script>
    function openModal(page) {
      const overlay = document.getElementById("overlay");
      const frame = document.getElementById("modalFrame");

      // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–∫—Ä–æ–ª–ª —Ñ–æ–Ω–∞
      document.body.classList.add('modal-open');

      overlay.classList.add("active");

      frame.onload = () => {
        const w = frame.contentWindow;
        if (!w) return;

        // –î–ª—è ants.html (–µ—Å–ª–∏ –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
        if (page.includes("ants.html") && typeof w.newGraph === "function") {
          w.newGraph();
        }
      };

      frame.src = page;
    }

    function closeModal() {
      // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∫—Ä–æ–ª–ª —Ñ–æ–Ω–∞
      document.body.classList.remove('modal-open');
      
      document.getElementById("modalFrame").src = "";
      document.getElementById("overlay").classList.remove("active");
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeModal();
      }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ overlay –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    document.getElementById("overlay").addEventListener('click', function(event) {
      if (event.target === this) {
        closeModal();
      }
    });
  </script>

  <script type="module">
    import { initBoids } from "../static/js/boids.js";
    import { initAnts } from "../static/js/aco.js";
    import { initSDS } from "../static/js/sds.js";
    import { initVicsek } from "../static/js/vicsek.js";

    // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ DOM
    document.addEventListener('DOMContentLoaded', () => {
      // –ü—Ä–µ–≤—å—é –¥–ª—è Boids
      const previewCanvas = document.getElementById("previewBoids");
      let boidsInstance = null;
      let isBoidsAnimating = false;

      if (previewCanvas && previewCanvas.getContext) {
        boidsInstance = initBoids(previewCanvas, { 
          boidCount: 20, 
          boidSize: 3, 
          separationWeight: 3, 
          separationDist: 70, 
          maxSpeed: 6, 
          fov: 360,
          isPreview: true,
          startPaused: true
        });

        requestAnimationFrame(() => {
          if (boidsInstance && boidsInstance.drawStaticFrame) {
            boidsInstance.drawStaticFrame();
          }
        });

        previewCanvas.addEventListener('mouseenter', () => {
          if (boidsInstance && !isBoidsAnimating) {
            isBoidsAnimating = true;
            boidsInstance.startAnimation();
          }
        });

        previewCanvas.addEventListener('mouseleave', () => {
          if (boidsInstance && isBoidsAnimating) {
            setTimeout(() => {
              if (boidsInstance) {
                boidsInstance.pauseAnimation();
                isBoidsAnimating = false;
              }
            }, 1000);
          }
        });
      }

      // –ü—Ä–µ–≤—å—é –¥–ª—è ACO
      const previewAnts = document.getElementById("previewAnts");
      let antsInstance = null;
      let isAntsAnimating = false;

      if (previewAnts && previewAnts.getContext) {
        antsInstance = initAnts(previewAnts, {
          nodeCount: 8,
          alpha: 1.0,
          beta: 2.0,
          rho: 0.3,
          Q: 1.0,
          colonySize: 5,
          maxIterations: 999,
          speed: 300,
          seed: 43,
          isPreview: true
        });

        requestAnimationFrame(() => {
          if (antsInstance && antsInstance.drawStaticFrame) {
            antsInstance.drawStaticFrame();
          }
        });

        previewAnts.addEventListener('mouseenter', () => {
          if (antsInstance && !isAntsAnimating) {
            isAntsAnimating = true;
            antsInstance.start();
          }
        });

        previewAnts.addEventListener('mouseleave', () => {
          if (antsInstance && isAntsAnimating) {
            setTimeout(() => {
              if (antsInstance) {
                antsInstance.pause();
                isAntsAnimating = false;
              }
            }, 2000);
          }
        });
      }

      // –ü—Ä–µ–≤—å—é –¥–ª—è SDS
      const previewSDS = document.getElementById("previewSDS");
      let sdsInstance = null;
      let isSDSAnimating = false;

      if (previewSDS && previewSDS.getContext) {
        sdsInstance = initSDS(previewSDS, {
          N: 100,
          func: 'twopeaks',
          sigma: 0.08,
          restartProb: 0.6,
          showHeatmap: false,
          showTraj: false,
          showBest: true,
          stepsPerFrame: 2,
          isPreview: true,
          startPaused: true
        });

        requestAnimationFrame(() => {
          if (sdsInstance && sdsInstance.drawStaticFrame) {
            sdsInstance.drawStaticFrame();
          }
        });

        previewSDS.addEventListener('mouseenter', () => {
          if (sdsInstance && !isSDSAnimating) {
            isSDSAnimating = true;
            sdsInstance.startAnimation();
          }
        });

        previewSDS.addEventListener('mouseleave', () => {
          if (sdsInstance && isSDSAnimating) {
            setTimeout(() => {
              if (sdsInstance) {
                sdsInstance.pauseAnimation();
                isSDSAnimating = false;
              }
            }, 1500);
          }
        });
      }

      // –ü—Ä–µ–≤—å—é –¥–ª—è Vicsek
      const previewVicsek = document.getElementById("previewVicsek");
      let vicsekInstance = null;
      let isVicsekAnimating = false;

      if (previewVicsek && previewVicsek.getContext) {
        vicsekInstance = initVicsek(previewVicsek, {
          particleCount: 50,
          interactionRadius: 25,
          noiseAmplitude: 0.3,
          speed: 1.5,
          timeStep: 1.0,
          vizTrails: 30,
          showTrails: false,
          isPreview: true,
          startPaused: true
        });

        requestAnimationFrame(() => {
          if (vicsekInstance && vicsekInstance.drawStaticFrame) {
            vicsekInstance.drawStaticFrame();
          }
        });

        previewVicsek.addEventListener('mouseenter', () => {
          if (vicsekInstance && !isVicsekAnimating) {
            isVicsekAnimating = true;
            vicsekInstance.startAnimation();
          }
        });

        previewVicsek.addEventListener('mouseleave', () => {
          if (vicsekInstance && isVicsekAnimating) {
            setTimeout(() => {
              if (vicsekInstance) {
                vicsekInstance.pauseAnimation();
                isVicsekAnimating = false;
              }
            }, 1000);
          }
        });
      }
    });
  </script>
  <button class="floating-button" onclick="openModal('./swarm-blocks.html')" title="–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏ SwarmBlocks">
    üéÆ
  </button>
</body>
</html>
